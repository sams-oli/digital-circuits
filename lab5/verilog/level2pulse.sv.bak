// Module Purpose:
//		Este módulo provê uma saída de único ciclo, baseada em um push button
// -----------------------------------------------------------------------------
//	Params:		Este módulo não é parametrizado.
//	Inputs:		Ver documento do laboratório.
//	Outputs:		Ver documento do laboratório.
// -----------------------------------------------------------------------------
module level2pulse (
	//------------------------------------------------------------------
	//	Entradas Clock & Reset
	//------------------------------------------------------------------
	input wire clock,
	input wire reset,
	//------------------------------------------------------------------
	
	//------------------------------------------------------------------
	//	Entradas
	//------------------------------------------------------------------
	input wire level,
	//------------------------------------------------------------------
	
	//------------------------------------------------------------------
	//	Saídas
	//------------------------------------------------------------------
	output logic pulse
	//------------------------------------------------------------------
);

	//--------------------------------------------------------------------------
	//	Codificação dos estados
	//--------------------------------------------------------------------------
	
	parameter [1:0] E0  = 2'b00,
                  	E1 = 2'b01,
                  	E2 = 2'b10;
	
	//--------------------------------------------------------------------------
	
	//--------------------------------------------------------------------------
	//	Declaração dos wires
	//--------------------------------------------------------------------------
	
	reg [1:0] state, prox;
	reg pulse;
	
	//--------------------------------------------------------------------------
	
	//--------------------------------------------------------------------------
	//	Lógica
	//--------------------------------------------------------------------------
	
	always @(posedge clock or negedge reset)
    	if (!reset) state <= E0;
    	else        state <= prox;

	always @(state or level) begin
   		prox = 2'bx;
    	pulse = 1'b0;

    case (state)
      E0 :   if (!level)       prox = E1;
             else           prox = E0;

      E1: begin
               pulse = 1'b1;
		prox = E2;
	end

      E2:   if (!level)       prox = E2;
            else           prox = E0;

    endcase
end

	//--------------------------------------------------------------------------
endmodule // level2pulse
